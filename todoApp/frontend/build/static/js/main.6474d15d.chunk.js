(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{32:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n(0),a=n.n(c),o=n(16),u=n.n(o),i=(n(32),n(4)),s=n(3),l=n.n(s),j=n(9),d=n(17),p=n(15),b=n(18),h=n(24),O="http://138.197.176.109",f=function(t){return function(e,n){return fetch(t,Object(p.a)({method:e,headers:Object(p.a)({"Content-Type":"application/json"},localStorage.authToken?{Authorization:"Bearer "+localStorage.authToken}:{})},n?{body:JSON.stringify(n)}:{})).then((function(t){return t.json()}))}},x=f("".concat(O,"/login")),v=f("".concat(O,"/api/todo"));var g=function(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(e){throw new Error(e)}},k=function(){return{type:"AUTH_LOGOUT"}},m=function(t){return{type:"AUTH_LOGIN",token:t}},T=function(t){return{type:"PROMISE",name:t,status:"PENDING"}},L=function(t,e){return{type:"PROMISE",name:t,status:"FULFILLED",payload:e}},y=function(t,e){return{type:"PROMISE",name:t,status:"REJECTED",error:e}},E=function(t,e){return{type:"CLEAR"}},S=function(t,e){return function(){var n=Object(j.a)(l.a.mark((function n(r){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(T(t)),n.prev=1,n.next=4,e;case 4:return c=n.sent,r(L(t,c)),n.abrupt("return",c);case 9:n.prev=9,n.t0=n.catch(1),r(y(t,n.t0));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(t){return n.apply(this,arguments)}}()},N=Object(b.b)({promise:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.name,c=e.status,a=e.payload,o=e.error;return"PROMISE"===n?Object(p.a)(Object(p.a)({},t),{},Object(d.a)({},r,{status:c,payload:a,error:o})):"CLEAR"===n?{}:t},auth:function(t,e){var n,r=e.type,c=e.token;return void 0===t&&(localStorage.authToken?(r="AUTH_LOGIN",c=localStorage.authToken):r="AUTH_LOGOUT"),"AUTH_LOGIN"===r&&(n=g(c),console.log(n),n)?(localStorage.authToken=c,{token:c,payload:n}):"AUTH_LOGOUT"===r?(localStorage.removeItem("authToken"),{}):t||{}}}),w=Object(b.c)(N,Object(b.a)(h.a));w.dispatch(function(){var t=Object(j.a)(l.a.mark((function t(e,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=localStorage.authToken)){t.next=5;break}return t.next=4,e(m(r));case 4:e(S("allPosts",v("GET")));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),console.log(O);var D=n(37),C=n(26),P=n.n(C),U=n(10),A=n(14),I=Object(i.b)(null,{getLogin:function(t){return function(){var e=Object(j.a)(l.a.mark((function e(n,r){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(S("login",x("POST",{userName:t})));case 2:if(!(c=e.sent)){e.next=7;break}return e.next=6,n(m(c.token));case 6:n(S("allPosts",v("GET")));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})((function(t){var e=t.getLogin,n=Object(c.useState)(""),a=Object(U.a)(n,2),o=a[0],u=a[1];return Object(r.jsxs)("div",{className:"Login",children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)("input",{type:"text",onChange:function(t){return u(t.target.value)},placeholder:"input login..."}),Object(r.jsx)(A.Link,{className:"loginLink",to:"/",children:Object(r.jsx)("button",{onClick:function(){return e(o)},children:"Login"})})]})})),G=Object(i.b)(null,{createTusk:function(t){return function(){var e=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(S("create",v("POST",{todoData:t})));case 2:n(S("allPosts",v("GET")));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(t){var e=t.createTusk,n=Object(c.useState)(""),a=Object(U.a)(n,2),o=a[0],u=a[1];return Object(r.jsxs)("div",{className:"AddTusk",children:[Object(r.jsx)("textarea",{onChange:function(t){return u(t.target.value)},maxLength:"108",placeholder:"type some tusk..."}),Object(r.jsx)("button",{onClick:function(){e(o),u("")},children:"ADD"})]})})),R=Object(i.b)(null,{getUpdate:function(t,e,n){return function(){var r=Object(j.a)(l.a.mark((function r(c){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=f("".concat(O,"/api/todo/").concat(t)),c(S("update",a("PUT",{todoData:e,isDone:n})));case 2:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()},getDelete:function(t){return function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f("".concat(O,"/api/todo/").concat(t)),e.next=3,n(S("remove",r("DELETE",{id:t})));case 3:n(S("allPosts",v("GET")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getEdit:function(t,e,n){return function(){var r=Object(j.a)(l.a.mark((function r(c){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=f("".concat(O,"/api/todo/").concat(t)),r.next=3,c(S("update",a("PUT",{todoData:e,isDone:n})));case 3:c(S("allPosts",v("GET")));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}})((function(t){var e=t.data,n=t.getUpdate,a=t.getDelete,o=t.getEdit,u=e._id,i=e.todoData,s=e.isDone,l=Object(c.useState)(s),j=Object(U.a)(l,2),d=j[0],p=j[1],b=Object(c.useState)(!1),h=Object(U.a)(b,2),O=h[0],f=h[1],x=Object(c.useState)(i),v=Object(U.a)(x,2),g=v[0],k=v[1];return Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{className:"check",children:Object(r.jsxs)("label",{className:"container",children:[Object(r.jsx)("input",{onChange:function(){p(!d),n(u,g,!d)},checked:d,type:"checkbox"}),Object(r.jsx)("span",{className:"checkmark"})]})}),Object(r.jsx)("div",{className:"tusk",children:O?Object(r.jsx)("input",{type:"text",value:g,onChange:function(t){return k(t.target.value)}}):Object(r.jsx)("p",{className:"".concat(d?"line-through":""),children:i})}),Object(r.jsx)("div",{className:"delete",children:Object(r.jsx)("button",{onClick:function(){return a(u)},children:"DELETE"})}),Object(r.jsxs)("div",{className:"edit",children:[O?Object(r.jsx)("button",{onClick:function(){return o(u,g,d)},children:"SAVE"}):Object(r.jsx)("button",{onClick:function(){f(!O),f(!O)},children:"EDIT"}),";"]})]})})),_=Object(i.b)((function(t){var e,n;return{posts:(null===t||void 0===t||null===(e=t.promise)||void 0===e||null===(n=e.allPosts)||void 0===n?void 0:n.payload)||[]}}))((function(t){var e=t.posts;return Object(r.jsx)("ul",{children:e.reverse().map((function(t){return Object(r.jsx)(R,{id:t._id.toString(),data:t},"".concat(t._id))}))})})),F=function(){return Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)("h1",{children:"TODO List"}),Object(r.jsx)(G,{}),Object(r.jsx)(_,{})]})},H=Object(i.b)((function(t){var e,n;return{currentUser:(null===t||void 0===t||null===(e=t.auth)||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.userName)||"anon"}}),{getLogout:function(){return function(){var t=Object(j.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(k());case 2:e(E());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(t){var e=t.getLogout,n=t.currentUser;return Object(r.jsx)("header",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)(A.Link,{className:"Link",to:"/",children:"TodoList"})}),Object(r.jsx)("li",{children:Object(r.jsx)(A.Link,{className:"Link",to:"/loginF",children:"Login"})}),Object(r.jsxs)("li",{onClick:function(){return e()},children:["Logout[",n,"]"]})]})})})),J=P()();var M=function(){return Object(r.jsx)(D.Router,{history:J,children:Object(r.jsxs)(i.a,{store:w,children:[Object(r.jsx)(H,{}),Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)(D.Switch,{children:[Object(r.jsx)(D.Route,{path:"/",exact:!0,component:F}),Object(r.jsx)(D.Route,{path:"/loginF",exact:!0,component:I})]})})]})})},B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),r(t),c(t),a(t),o(t)}))};u.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(M,{})}),document.getElementById("root")),B()}},[[47,1,2]]]);
//# sourceMappingURL=main.6474d15d.chunk.js.map